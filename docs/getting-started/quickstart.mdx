
# Quick Start

This guide will explore the basics of creating a simple WasmKit project.

WasmKit allows you to compile your Rust code, generate schema for it, run your scripts, tests and deploy to network, interact with contract instance on the network.

To create your WasmKit project, run:

```bash
wasmkit init <project-name>

# or

wasmkit init yellow # example
```

The generated directory will have the following initial structure:

```bash
.
├── contracts
│   ├── Cargo.lock
│   ├── Cargo.toml
│   ├── examples
│   │   └── schema.rs
│   └── src
│       ├── contract.rs
│       ├── error.rs
│       ├── lib.rs
│       ├── msg.rs
│       └── state.rs
├── package.json
├── Cargo.toml
├── Cargo.lock
├── wasmkit.config.js
├── README.md
├── scripts
│   └── sample-script.ts
└── test
    └── sample-test.ts

5 directories, 15 files
```

The `contracts/` directory has all the rust files for the contract logic. `scripts/` directory can contain `.ts` scripts that user can write according to the use case, a sample script has been added to give some understanding of how a user script should look like. `test/` directory can contain `.ts` scripts to run tests for the deployed contracts.

## Listing tasks

To see the possible tasks (commands) that are available, run `wasmkit` in your project's folder:

```bash
wasmkit help
```

This is the list of built-in tasks. This is your starting point to find out what tasks are available to run.

If you take a look at the `wasmkit.config.js` file, you will find :

<CH.Code lineNumbers={true}>
```js
const testnet_accounts = [
  {
    name: 'account_0',
    address: 'juno1evpfprq0mre5n0zysj6cf74xl6psk96gus7dp5',
    mnemonic: 'omit sphere nurse rib tribe suffer web account catch brain hybrid zero act gold coral shell voyage matter nose stick crucial fog judge text'
  },
  {
    name: 'account_1',
    address: 'juno1njamu5g4n0vahggrxn4ma2s4vws5x4w3u64z8h',
    mnemonic: 'student prison fresh dwarf ecology birth govern river tissue wreck hope autumn basic trust divert dismiss buzz play pistol focus long armed flag bicycle'
  }
];

const localnet_accounts = [
  {
    name: 'account_0',
    address: 'juno16g2rahf5846rxzp3fwlswy08fz8ccuwk03k57y',
    mnemonic: 'clip hire initial neck maid actor venue client foam budget lock catalog sweet steak waste crater broccoli pipe steak sister coyote moment obvious choose'
  }
];

const networks = {
  localnet: {
    endpoint: 'http://localhost:26657/',
    accounts: localnet_accounts,
  },
  // uni-2
  testnet: {
    endpoint: 'https://rpc.uni.juno.deuslabs.fi/',
    chainId: 'uni-3',
    trustNode: true,
    keyringBackend: 'test',
    accounts: testnet_accounts,
  },
};

module.exports = {
  networks: {
    default: networks.testnet,
    localnet: networks.localnet,
  },
  mocha: {
    timeout: 60000
  },
  rust: {
    version: "1.59.0",
  }
};
```
</CH.Code>

**Note** that the accounts mentioned above are just a sample, don't use them in mainnet as it can lead to capital loss.

## Compiling contracts

To compile the contracts, use:

```bash
wasmkit compile
```

This will compile all the contracts in the project.

To compile only one contracts or a subset of all contracts in the project, use: 

```bash
wasmkit compile <contract-source-dir>
```

To skip schema generation while compiling use:

```bash
wasmkit compile --skip-schema
```

This command will generate following:

1. Contract binary files --> `artifacts/contracts/*.wasm`
2. Schema files --> `artifacts/schema/*.json`
3. Typescript schema files --> `artifacts/typescript_schema/*.ts`

## Running user scripts

User scripts are a way to define the flow of interacting with contracts on some network in form of a script. These scripts can be used to deploy a contract, query/transact with the contract.

A sample script `scripts/sample-script.ts` is available in the boilerplate. Contents of the script is as follows:

<CH.Code lineNumbers={true}>
```js
import { getAccountByName } from "wasmkit";

import { CounterContract } from "../artifacts/typescript_schema/Counter";

async function run() {
  const runTs = String(new Date());
  const contract_owner = getAccountByName("account_0");
  const counter_contract = new CounterContract();
  await counter_contract.setUpclient();

  console.log("Client setup done!! ");

  const deploy_response = await counter_contract.deploy(
    contract_owner,
    { // custom fees
      amount: [{ amount: "900000", denom: "ujunox" }],
      gas: "35000000",
    }
  );
  console.log(deploy_response);
  const contract_info = await counter_contract.instantiate(
    {
      "count": 102
    }, `deploy test ${runTs}`, contract_owner);
  console.log(contract_info);

  const inc_response = await counter_contract.increment({account: contract_owner});
  console.log(inc_response);

  const response = await counter_contract.getCount();
  console.log(response);

}

module.exports = { default: run };
```
</CH.Code>

Detailed overview of testing is given in the [Writing scripts](./guides/writing-scripts) section.

The script above deploys, inits contract `sample-project` using account `account_0` and add `100000000` amount `ERC` token to the contract_owner address. It then query balance of contract_owner account using `query.balance`. After that it transfers `50000000` token from contract_owner account to the other account address using `tx.transfer`. ANd again query the contract_owner address.

For the above script to be able to run, an account with name `account_0` must be present in `wasmkit.config.js` and contract artifacts (compiled `.wasm` and schema `.json` files) in `artifacts/` dir must be present for contract `sample-project`.

## Running test scripts

Test scripts are used to test the contract after deploying it to the network and asserting on the interactions with the contract instance.

A sample test script `test/sample-test.ts` is available in the boilerplate. Contents of the script is as follows:

<CH.Code lineNumbers={true}>
```js
import { use } from "chai";
import { getAccountByName, wasmkitChai } from "wasmkit";

import { CounterContract } from "../artifacts/typescript_schema/Counter";

use(wasmkitChai);

describe("counter", () => {

  async function setup() {
    const contract_owner = getAccountByName("account_0");
    const counter_contract = new CounterContract();
    await counter_contract.setUpclient();

    return { contract_owner, counter_contract };
  }

  it("deploy and init", async () => {
    const runTs = String(new Date());
    const { contract_owner, counter_contract } = await setup();
    const deploy_response = await counter_contract.deploy(
      contract_owner,
      { // custom fees
        amount: [{ amount: "90000", denom: "ujunox" }],
        gas: "35000000",
      }
    );
    console.log(deploy_response);
    const contract_info = await counter_contract.instantiate(
      {
        "count": 102
      }, `deploy test ${runTs}`, contract_owner);
    console.log(contract_info);
  });
});
```
</CH.Code>

Detailed overview of testing is given in the [Guides](./guides/testing) section.

REPL (read–eval–print loop) gives the a console to do real time interactions with the network. Open the REPL using `wasmkit repl --network <network-name>`. Sample REPL interaction shown below as follows:

```bash
wasmkit repl --network testnet
★★★  Welcome to wasmkit REPL ★★★
Try typing: config

wasmkit> config
{
  name: 'default',
  config: {
    endpoint: 'https://rpc.uni.juno.deuslabs.fi/',
    chainId: 'uni-3',
    trustNode: true,
    keyringBackend: 'test',
    accounts: [ [Object], [Object] ]
  }
}
```

When REPL is opened, `wasmkit` library is already imported, use `wasmkit.` to access classes and functions from the library. wasmkit Runtime Environment can be access using `env` variable and `wasmkit.config.js` data can be accessed using `config` variable.

## Get node information

Node information can be fetched using `wasmkit node-info --network <network-name>` as follows:

```bash
wasmkit node-info --network testnet
Network: testnet
ChainId: uni-3
Block height: 1358994
```

## Cleanup artifacts

To clear artifacts data, use `wasmkit clean` and to clean artifacts for only one contract, use:

```bash
wasmkit clean <contract-name>
```
